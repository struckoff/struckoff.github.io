<!DOCTYPE html>
<html>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> 
	<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <link href="calc.css" rel="stylesheet" type="text/css"/>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  
 <head>
	<title>Calculator 1</title>
	<meta charset="utf-8">
	<style>body {zoom:120%}</style> 
 </head>
 <body>

   <p>Результат: </p>
   <select><option>Выберите действие:</option></select> для аргументов: <span id="args"></span> 
       
      <span id="r"></span>
      
         <script> 
           $('select').selectmenu();
        $("#r").effect("slide");
         
        //<![CDATA[
     	 //массив операций, могущий быть прочитанным из JSON-файла
var operations = {
                 "plus"		:	[2, "return 1*arguments[0] + 1*arguments[1]","PLUS"],
   				 "minus"		:	[2, "return 1*arguments[0] - 1*arguments[1]","MINUS"],
                 "asterisk"	: 	[2, "return arguments[0] * arguments[1]","MULTIPLE"],
  				 "divide"	: 	[2, "if (arguments[1]!=0) return arguments[0] / arguments[1]; return 'Плохо так'","/"], 
                 "progress" :	[3, "var n1 = 1*arguments[0]; var n2 = 1*arguments[1]; var step = 1*arguments[2]; var s = 0; for (var i=n1; i<=n2; i+=Number(step)) {s += i};   return s","Ar. Progress"],                 
       };   
     	 
       function Calc(){
   //заполнение объекта-калькулятора операциями
           for (k in operations) {
                this[k] = new Function(operations[k][1]);
           }
         
           this.buildSelect = function(){
              for (k in operations) {
                $("select").append("<option value='" + k + "'>" + operations[k][2] + "</option>");  
              
              }             
           }

           this.buildInputs = function(){
           	 var args = operations[   $("select").val()    ][0];
             $("#args").html("");
           	 for (var i = 0; i < args; i++)
                $("#args").append("<input>");
               
             $( "<button>Вычислить</button>" ).appendTo( "#args" ).on("click", function(){
             
                  var vals = $("input").map(function(){return $(this).val()}).get(); //получить массив аргументов
                  $("#r").html(       Calc()[  $("select").val()   ].apply(null, vals)    );
                  $("select")[0].selectedIndex = 0; 
             });
           }
           return this;
         }
         Calc().buildSelect();  
         $("select").on("change",  function(){  
           	  Calc().buildInputs();
         });  
     
     	//]]>
   </script>
 </body>
</html>